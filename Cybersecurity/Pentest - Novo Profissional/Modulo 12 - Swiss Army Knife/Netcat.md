
---

O **Netcat** (ou **nc**) é uma ferramenta poderosa e versátil usada para rede e debugging. Ele é frequentemente chamado de "canivete suíço das redes" devido às suas diversas funções. O Netcat pode ser usado para escanear portas, transferir arquivos, atuar como cliente/servidor de rede e até para monitorar ou depurar comunicações.

---
### Interagindo com serviços

Conectar a um serviço e enviar comandos manuais para depuração, como em um servidor HTTP:

Entrada:
```bash
nc -v www.businesscorp.com.br 80
```

Saida:
```
DNS fwd/rev mismatch: www.businesscorp.com.br != ip225.ip-37-59-174.eu
www.businesscorp.com.br [37.59.174.225] 80 (http) open
Comando - HEAD / HTTP/1.0
Saida - HTTP/1.1 408 Request Time-out
Date: Fri, 27 Sep 2019 21:53:06 GMT
Server: Apache/2.2.22 (Debian)
Vary: Accept-Encoding
Connection: close
Content-Type: text/html; charset=iso-8859-1
```

---
### Chat e IP logger

 No servidor:
```bash
nc -vnlp 80
```
Foi iniciado um serviço na porta 80.

No cliente:
```bash
nc [endereco do servidor] 80
```
OBS: Como o serviço esta rodando na porta 80, você pode informar o endereço e a porta na barra de pesquisa do navegador.

``-v``: Define o nível de verbosidade.
``-n`` : Não resolver nomes de host(DNS) e a trabalhar apenas com endereços IP.
``-l`` : Escuta conexões em vez de usar o modo de conexão.
``-p`` : Vincula a porta de origem do Netcat.

---

### UDP e File Transfer

Utilizando conexão UPD:
```bash
nc -vlup 53
```

``-u`` - Use conexão UDP.

**Transferência de arquivo**

Servidor (recebendo):
```bash
nc -l -p 5050 > arquivo_recebido.txt
```

Cliente (enviando):
```bash
nc [endereco do servidor] 5050 < arquivo_para enviar.txt
```

---

### Port Scanning

Para verificar portas abertas em um host:
```bash 
nc -vz [endereco] [intervalos de portas]
```

Usando bash script:
```bash
nano portas #Criando um arquivo com algumas portas especificas.
for ip in $(cat portas);do nc -vnz 172.16.1.5 $ip #Comando bash script
```

--- 

### Criando um Honeypot

Script em bash para abrir portas:

```bash
echo "Abrindo portas"
nc -vnlp 21&
sleep 2
nc -vnlp 22&
sleep 2 
nc -vnlp 23&
sleep 2
nc -vnlp 25&
echo "Portas abertas"
netstat -nlpt
```

Após abrir as portas, criei um arquivo txt para exibe na porta 21, o txt contem um exemplo de banner quando e feito uma conexão FTP, para que o usuário que esta acessando a porta 21 achar que está em uma conexão FTP.

```bash
nc -vnlp 21 < 21.txt 
``` 

Estarei direcionando tudo que for enviado pelo usuário para um arquivo de log ate mesmo os erros. No final do arquivo log eu exibo a data e hora que esta sendo acessado pelo usuário. 

```bash
nc -vnlp 21 < 21.txt >> 21.log 2>> 21.log;echo $(date) >> 21.log
```
