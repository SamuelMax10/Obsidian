
---

### **Bibliotecas Importadas**

1. **`#include <stdio.h>`**
    
    - Usada para entrada e saída padrão, como a função `printf`.
2. **`#include <sys/socket.h>`**
    
    - Contém definições para a criação e manipulação de sockets.
3. **`#include <netdb.h>`**
    
    - Inclui estruturas para operações de rede, como `sockaddr`.
4. **`#include <arpa/inet.h>`**
    
    - Contém funções para manipular endereços IP, como `inet_addr`.
5. **`#include <unistd.h>`**
    
    - Declarações para funções de sistema, como `close`, usadas para fechar descritores de arquivo.

### **Estrutura e Funções**

#### **Declaração de Variáveis**

- `int meusocket;`
    - Representa o descritor do socket criado.
- `int conecta;`
    - Armazena o resultado da tentativa de conexão.

#### **Configuração do Socket**

1. **Criação do socket**
	``meusocket = socket(AF_INET, SOCK_STREAM, 0);``

- ``AF_INET``: Indica que o socket será da família de endereços IPv4.
- `SOCK_STREAM`: Define o tipo de socket como orientado à conexão (TCP).
- `0`: Especifica o protocolo padrão para TCP.
- Retorna um descritor do socket (`meusocket`), ou -1 em caso de erro.

2. **Configuração do endereço do alvo**
	``alvo.sin_family = AF_INET;
	``alvo.sin_port = htons(80);
	``alvo.sin_addr.s_addr = inet_addr("192.168.0.1");``

- `alvo.sin_family`: Define a família do endereço (IPv4).
- `alvo.sin_port`: Define a porta a ser utilizada, convertida para ordem de bytes de rede usando `htons` (Host TO Network Short).
- `alvo.sin_addr.s_addr`: Define o endereço IP, convertido para o formato apropriado com `inet_addr`.

**Tentativa de Conexão**
``conecta = connect(meusocket, (struct sockaddr *)&alvo, sizeof alvo);``

- Tenta estabelecer uma conexão TCP com o endereço e porta específicos.
- Retorna ``0`` se a conexão foi bem-sucedida, ou um valor negativo se houve erro.

**Verificação do Resultado**
``if(conecta == 0){
    ```printf("Porta Aberta \n");
    close(meusocket);
    close(conecta);`
}else{
    printf("Porta fechada \n");
}

1. **Se a conexão for bem-sucedida (`conecta == 0`)**:
    - Imprime "Porta Aberta".
    - Fecha o socket criado usando `close(meusocket)`.
    
2. **Se a conexão falhar**:
    - Imprime "Porta fechada".

**Encerramento do Programa**
``return 0;

- Indica que o programa terminou com sucesso.

![](https://i.imgur.com/vAOS4Lg.png)

### **Resumo**

Este programa tenta abrir uma conexão com a porta 80 do IP `192.168.0.1`. Ele exibe se a porta está aberta ou fechada e encerra corretamente o socket. É essencial tratar erros adequadamente e evitar chamar `close` em valores que não sejam descritores válidos.