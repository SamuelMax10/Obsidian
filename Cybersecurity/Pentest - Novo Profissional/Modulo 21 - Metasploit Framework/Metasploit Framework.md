
---

## Introdução ao Metasploit Framework

O **Metasploit Framework** é uma das ferramentas mais utilizadas no mundo da **segurança da informação**, especialmente em atividades de **pentest (teste de invasão)**, **red team**, **blue team** e **pesquisa de vulnerabilidades**. Ele fornece um ambiente completo para **desenvolver, testar e executar exploits** contra sistemas e aplicações, de forma controlada e profissional.

Criado inicialmente por **H.D. Moore**, o Metasploit evoluiu para uma plataforma robusta mantida atualmente pela **Rapid7**, sendo amplamente adotado por profissionais de segurança, empresas e pesquisadores.

### Principais componentes

O framework é composto por diversos módulos, entre os principais:

- **Exploits**: códigos que exploram vulnerabilidades específicas.

- **Payloads**: cargas executadas após a exploração (ex: abrir uma shell, criar uma sessão Meterpreter).

- **Auxiliary**: módulos auxiliares para varredura, enumeração, brute force, entre outros.

- **Post**: módulos de pós-exploração, usados após obter acesso ao alvo.

- **Encoders**: utilizados para ofuscar payloads e evitar detecção por antivírus.

### 1 - Instalação do Metasploit

O Metasploit já vem instalado por padrão no Kali Linux.

Para conferir:

```bash
msfconsole --version
```

Se não estiver instalado ou quiser garantir que está atualizado:

```bash
sudo apt update
sudo apt install metasploit-framework -y
```

### 2 - Para que serve o banco de dados no Metasploit?

O banco de dados é usado para:

- Salvar hosts descobertos
- Guardar portas abertas
- Armazenar serviços identificados
- Registrar credenciais
- Facilitar correlação de informações durante o pentest

Sem banco de dados, o Metasploit funciona, mas perde organização e histórico.
O Metasploit usa PostgreSQL.

### 3 - Configurando o banco de dados (PostgreSQL)

#### Passo 1: Iniciar o serviço do PostgreSQL

```bash
sudo systemctl start postgresql
```

Para iniciar automaticamente no boot:

```bash
sudo systemctl enable postgresql
```

#### Passo 2: Criar e configurar o banco do Metasploit

No Kali, existe um comando que faz tudo automaticamente:

```bash
sudo msfdb init
```

Esse comando:

- Cria o usuário do banco
- Cria o banco de dados
- Ajusta permissões
- Conecta o Metasploit ao PostgreSQL

### 4 - Inicializando o Metasploit

Agora é só iniciar o console:

```bash
msfconsole
```

Se tudo estiver certo, você verá algo parecido com:

```bash
msf6 >
```

### 5 - Fluxo resumido

```bash
sudo apt update
sudo apt install metasploit-framework -y
sudo systemctl start postgresql
sudo systemctl enable postgresql
sudo msfdb init
msfconsole
db_status
```

